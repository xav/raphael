/*
 * Raphael 1.3.1 - JavaScript Vector Library
 *
 * Copyright (c) 2008 - 2009 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael=function(){function N(a,b,c){function e(){var f=Array[q].slice.call(arguments,0),d=f[J]("\u25ba"),i=e.cache=e.cache||{},g=e.count=e.count||[];if(i[z](d))return c?c(i[d]):i[d];g[n]>=1E3&&delete i[g.shift()];g[C](d);i[d]=a[G](b,f);return c?c(i[d]):i[d]}return e}function ta(){return this.x+K+this.y}function ua(a){return function(b,c,e,f){var d={back:a};m.is(e,"function")?(f=e):(d.rot=e);b&&b.constructor==t&&(b=b.attrs.path);b&&(d.along=b);return this.animate(d,c,f)}}var O=/[, ]+/,Ta=/^(circle|rect|path|ellipse|text|image)$/,A=document,V=window,va={was:"Raphael"in V,is:V.Raphael},m=function(){if(m.is(arguments[0],"array")){for(var a=arguments[0],b=ma[G](m,a.splice(0,3+m.is(a[0],L))),c=b.set(),e=0,f=a[n];e<f;e++){var d=a[e]||{};Ta.test(d.type)&&c[C](b[d.type]().attr(d))}return c}return ma[G](m,arguments)},E=function(){},G="apply",K=" ",W="click dblclick mousedown mousemove mouseout mouseover mouseup".split(K),z="hasOwnProperty",J="join",n="length",q="prototype",T=String[q].toLowerCase,u=Math,P=u.max,Q=u.min,L="number",Ua=Object[q].toString,D=u.pow,C="push",X=/^(?=[\da-f]$)/,wa=/^url\(['"]?([^\)]+)['"]?\)$/i,Va=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgb\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|rgb\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\)|hs[bl]\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|hs[bl]\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\))\s*$/i,B=u.round,x=parseFloat,U=parseInt,ca=String[q].toUpperCase,da={"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},na={along:"along","clip-rect":"csv",cx:L,cy:L,fill:"colour","fill-opacity":L,"font-size":L,height:L,opacity:L,path:"path",r:L,rotation:"csv",rx:L,ry:L,scale:"csv",stroke:"colour","stroke-opacity":L,"stroke-width":L,translation:"csv",width:L,x:L,y:L};m.version="1.3.1";m.type=V.SVGAngle||A.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(m.type=="VML"){var Z=document.createElement("div");Z.innerHTML="<!--[if vml]><br><br><![endif]--\>";if(Z.childNodes[n]!=2)return null}m.svg=!(m.vml=m.type=="VML");E[q]=m[q];m._id=0;m._oid=0;m.fn={};m.is=function(a,b){b=T.call(b);return(b=="object"||b=="undefined")&&typeof a==b||a==null&&b=="null"||T.call(Ua.call(a).slice(8,-1))==b};m.setWindow=function(a){V=a;A=V.document};var ea=function(a){if(m.vml){var b=/^\s+|\s+$/g;ea=N(function(e){var f;e=(e+"").replace(b,"");try{var d=new ActiveXObject("htmlfile");d.write("<body>");d.close();f=d.body}catch(i){f=createPopup().document.body}d=f.createTextRange();try{f.style.color=e;var g=d.queryCommandValue("ForeColor");g=(g&255)<<16|g&65280|(g&16711680)>>>16;return"#"+("000000"+g.toString(16)).slice(-6)}catch(h){return"none"}})}else{var c=A.createElement("i");c.title="Rapha\u00ebl Colour Picker";c.style.display="none";A.body.appendChild(c);ea=N(function(e){c.style.color=e;return A.defaultView.getComputedStyle(c,"").getPropertyValue("color")})}return ea(a)};m.hsb2rgb=N(function(a,b,c){if(m.is(a,"object")&&"h"in a&&"s"in a&&"b"in a){c=a.b;b=a.s;a=a.h}var e;if(c==0)return{r:0,g:0,b:0,hex:"#000"};if(a>1||b>1||c>1){a/=255;b/=255;c/=255}e=~~(a*6);a=a*6-e;var f=c*(1-b),d=c*(1-b*a),i=c*(1-b*(1-a));a=[c,d,f,f,i,c,c][e];b=[i,c,c,d,f,f,i][e];e=[f,f,i,c,c,d,f][e];a*=255;b*=255;e*=255;c={r:a,g:b,b:e};a=(~~a).toString(16);b=(~~b).toString(16);e=(~~e).toString(16);a=a.replace(X,"0");b=b.replace(X,"0");e=e.replace(X,"0");c.hex="#"+a+b+e;return c},m);m.rgb2hsb=N(function(a,b,c){if(m.is(a,"object")&&"r"in a&&"g"in a&&"b"in a){c=a.b;b=a.g;a=a.r}if(m.is(a,"string")){var e=m.getRGB(a);a=e.r;b=e.g;c=e.b}if(a>1||b>1||c>1){a/=255;b/=255;c/=255}e=P(a,b,c);var f=Q(a,b,c);if(f==e)return{h:0,s:0,b:e};else{var d=e-f;f=d/e;a=a==e?(b-c)/d:b==e?2+(c-a)/d:4+(a-b)/d;a/=6;a<0&&a++;a>1&&a--}return{h:a,s:f,b:e}},m);var Wa=/,?([achlmqrstvxz]),?/gi;m._path2string=function(){return this.join(",").replace(Wa,"$1")};m.getRGB=N(function(a){if(!a||(a+="").indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if(a=="none")return{r:-1,g:-1,b:-1,hex:"none"};!({hs:1,rg:1}[z](a.substring(0,2))||a.charAt()=="#")&&(a=ea(a));var b,c,e,f;if(a=a.match(Va)){if(a[2]){e=U(a[2].substring(5),16);c=U(a[2].substring(3,5),16);b=U(a[2].substring(1,3),16)}if(a[3]){e=U((f=a[3].charAt(3))+f,16);c=U((f=a[3].charAt(2))+f,16);b=U((f=a[3].charAt(1))+f,16)}if(a[4]){a=a[4].split(/\s*,\s*/);b=x(a[0]);c=x(a[1]);e=x(a[2])}if(a[5]){a=a[5].split(/\s*,\s*/);b=x(a[0])*2.55;c=x(a[1])*2.55;e=x(a[2])*2.55}if(a[6]){a=a[6].split(/\s*,\s*/);b=x(a[0]);c=x(a[1]);e=x(a[2]);return m.hsb2rgb(b,c,e)}if(a[7]){a=a[7].split(/\s*,\s*/);b=x(a[0])*2.55;c=x(a[1])*2.55;e=x(a[2])*2.55;return m.hsb2rgb(b,c,e)}a={r:b,g:c,b:e};b=(~~b).toString(16);c=(~~c).toString(16);e=(~~e).toString(16);b=b.replace(X,"0");c=c.replace(X,"0");e=e.replace(X,"0");a.hex="#"+b+c+e;return a}return{r:-1,g:-1,b:-1,hex:"none",error:1}},m);m.getColor=function(a){a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75};var b=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;if(a.h>1){a.h=0;a.s-=0.2;a.s<=0&&(this.getColor.start={h:0,s:1,b:a.b})}return b.hex};m.getColor.reset=function(){delete this.start};m.parsePathString=N(function(a){if(!a)return null;var b={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[];if(m.is(a,"array")&&m.is(a[0],"array"))c=fa(a);c[n]||(a+"").replace(/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,function(e,f,d){var i=[];e=T.call(f);for(d.replace(/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,function(g,h){h&&i[C](+h)});i[n]>=b[e];){c[C]([f].concat(i.splice(0,b[e])));if(!b[e])break}});c.toString=m._path2string;return c});m.findDotsAtSegment=function(a,b,c,e,f,d,i,g,h){var j=1-h,l=D(j,3)*a+D(j,2)*3*h*c+j*3*h*h*f+D(h,3)*i;j=D(j,3)*b+D(j,2)*3*h*e+j*3*h*h*d+D(h,3)*g;var o=a+2*h*(c-a)+h*h*(f-2*c+a),r=b+2*h*(e-b)+h*h*(d-2*e+b),p=c+2*h*(f-c)+h*h*(i-2*f+c),k=e+2*h*(d-e)+h*h*(g-2*d+e);a=(1-h)*a+h*c;b=(1-h)*b+h*e;f=(1-h)*f+h*i;d=(1-h)*d+h*g;g=90-u.atan((o-p)/(r-k))*180/u.PI;(o>p||r<k)&&(g+=180);return{x:l,y:j,m:{x:o,y:r},n:{x:p,y:k},start:{x:a,y:b},end:{x:f,y:d},alpha:g}};var ha=N(function(a){if(!a)return{x:0,y:0,width:0,height:0};a=ga(a);for(var b=0,c=0,e=[],f=[],d,i=0,g=a[n];i<g;i++){d=a[i];if(d[0]=="M"){b=d[1];c=d[2];e[C](b);f[C](c)}else{b=Xa(b,c,d[1],d[2],d[3],d[4],d[5],d[6]);e=e.concat(b.min.x,b.max.x);f=f.concat(b.min.y,b.max.y);b=d[5];c=d[6]}}a=Q[G](0,e);d=Q[G](0,f);return{x:a,y:d,width:P[G](0,e)-a,height:P[G](0,f)-d}}),fa=function(a){var b=[];if(!m.is(a,"array")||!m.is(a&&a[0],"array"))a=m.parsePathString(a);for(var c=0,e=a[n];c<e;c++){b[c]=[];for(var f=0,d=a[c][n];f<d;f++)b[c][f]=a[c][f]}b.toString=m._path2string;return b},xa=N(function(a){if(!m.is(a,"array")||!m.is(a&&a[0],"array"))a=m.parsePathString(a);var b=[],c=0,e=0,f=0,d=0,i=0;if(a[0][0]=="M"){c=a[0][1];e=a[0][2];f=c;d=e;i++;b[C](["M",c,e])}i=i;for(var g=a[n];i<g;i++){var h=b[i]=[],j=a[i];if(j[0]!=T.call(j[0])){h[0]=T.call(j[0]);switch(h[0]){case "a":h[1]=j[1];h[2]=j[2];h[3]=j[3];h[4]=j[4];h[5]=j[5];h[6]=+(j[6]-c).toFixed(3);h[7]=+(j[7]-e).toFixed(3);break;case "v":h[1]=+(j[1]-e).toFixed(3);break;case "m":f=j[1];d=j[2];default:for(var l=1,o=j[n];l<o;l++)h[l]=+(j[l]-(l%2?c:e)).toFixed(3)}}else{b[i]=[];if(j[0]=="m"){f=j[1]+c;d=j[2]+e}h=0;for(l=j[n];h<l;h++)b[i][h]=j[h]}j=b[i][n];switch(b[i][0]){case "z":c=f;e=d;break;case "h":c+=+b[i][j-1];break;case "v":e+=+b[i][j-1];break;default:c+=+b[i][j-2];e+=+b[i][j-1]}}b.toString=m._path2string;return b},0,fa),$=N(function(a){if(!m.is(a,"array")||!m.is(a&&a[0],"array"))a=m.parsePathString(a);var b=[],c=0,e=0,f=0,d=0,i=0;if(a[0][0]=="M"){c=+a[0][1];e=+a[0][2];f=c;d=e;i++;b[0]=["M",c,e]}i=i;for(var g=a[n];i<g;i++){var h=b[i]=[],j=a[i];if(j[0]!=ca.call(j[0])){h[0]=ca.call(j[0]);switch(h[0]){case "A":h[1]=j[1];h[2]=j[2];h[3]=j[3];h[4]=j[4];h[5]=j[5];h[6]=+(j[6]+c);h[7]=+(j[7]+e);break;case "V":h[1]=+j[1]+e;break;case "H":h[1]=+j[1]+c;break;case "M":f=+j[1]+c;d=+j[2]+e;default:for(var l=1,o=j[n];l<o;l++)h[l]=+j[l]+(l%2?c:e)}}else{l=0;for(o=j[n];l<o;l++)b[i][l]=j[l]}switch(h[0]){case "Z":c=f;e=d;break;case "H":c=h[1];break;case "V":e=h[1];break;default:c=b[i][b[i][n]-2];e=b[i][b[i][n]-1]}}b.toString=m._path2string;return b},null,fa),ia=function(a,b,c,e){return[a,b,c,e,c,e]},ya=function(a,b,c,e,f,d){var i=1/3,g=2/3;return[i*a+g*c,i*b+g*e,i*f+g*c,i*d+g*e,f,d]},Aa=function(a,b,c,e,f,d,i,g,h,j){var l=u.PI,o=l*120/180,r=l/180*(+f||0),p=[],k,s=N(function(F,za,ja){var Ya=F*u.cos(ja)-za*u.sin(ja);F=F*u.sin(ja)+za*u.cos(ja);return{x:Ya,y:F}});if(j){v=j[0];k=j[1];d=j[2];y=j[3]}else{k=s(a,b,-r);a=k.x;b=k.y;k=s(g,h,-r);g=k.x;h=k.y;u.cos(l/180*f);u.sin(l/180*f);k=(a-g)/2;v=(b-h)/2;c=P(c,u.abs(k));e=P(e,u.abs(v));y=k*k/(c*c)+v*v/(e*e);if(y>1){c=u.sqrt(y)*c;e=u.sqrt(y)*e}y=c*c;var H=e*e;y=(d==i?-1:1)*u.sqrt(u.abs((y*H-y*v*v-H*k*k)/(y*v*v+H*k*k)));d=y*c*v/e+(a+g)/2;var y=y*-e*k/c+(b+h)/2,v=u.asin(((b-y)/e).toFixed(7));k=u.asin(((h-y)/e).toFixed(7));v=a<d?l-v:v;k=g<d?l-k:k;v<0&&(v=l*2+v);k<0&&(k=l*2+k);if(i&&v>k)v-=l*2;if(!i&&k>v)k-=l*2}l=k-v;if(u.abs(l)>o){p=k;l=g;H=h;k=v+o*(i&&k>v?1:-1);g=d+c*u.cos(k);h=y+e*u.sin(k);p=Aa(g,h,c,e,f,0,i,l,H,[k,p,d,y])}l=k-v;f=u.cos(v);o=u.sin(v);i=u.cos(k);k=u.sin(k);l=u.tan(l/4);c=4/3*c*l;l=4/3*e*l;e=[a,b];a=[a+c*o,b-l*f];b=[g+c*k,h-l*i];g=[g,h];a[0]=2*e[0]-a[0];a[1]=2*e[1]-a[1];if(j)return[a,b,g].concat(p);else{p=[a,b,g].concat(p)[J]().split(",");j=[];g=0;for(h=p[n];g<h;g++)j[g]=g%2?s(p[g-1],p[g],r).y:s(p[g],p[g+1],r).x;return j}},aa=function(a,b,c,e,f,d,i,g,h){var j=1-h;return{x:D(j,3)*a+D(j,2)*3*h*c+j*3*h*h*f+D(h,3)*i,y:D(j,3)*b+D(j,2)*3*h*e+j*3*h*h*d+D(h,3)*g}},Xa=N(function(a,b,c,e,f,d,i,g){var h=f-2*c+a-(i-2*f+c),j=2*(c-a)-2*(f-c),l=a-c,o=(-j+u.sqrt(j*j-4*h*l))/2/h;h=(-j-u.sqrt(j*j-4*h*l))/2/h;var r=[b,g],p=[a,i];u.abs(o)>1E12&&(o=0.5);u.abs(h)>1E12&&(h=0.5);if(o>0&&o<1){o=aa(a,b,c,e,f,d,i,g,o);p[C](o.x);r[C](o.y)}if(h>0&&h<1){o=aa(a,b,c,e,f,d,i,g,h);p[C](o.x);r[C](o.y)}h=d-2*e+b-(g-2*d+e);j=2*(e-b)-2*(d-e);l=b-e;o=(-j+u.sqrt(j*j-4*h*l))/2/h;h=(-j-u.sqrt(j*j-4*h*l))/2/h;u.abs(o)>1E12&&(o=0.5);u.abs(h)>1E12&&(h=0.5);if(o>0&&o<1){o=aa(a,b,c,e,f,d,i,g,o);p[C](o.x);r[C](o.y)}if(h>0&&h<1){o=aa(a,b,c,e,f,d,i,g,h);p[C](o.x);r[C](o.y)}return{min:{x:Q[G](0,p),y:Q[G](0,r)},max:{x:P[G](0,p),y:P[G](0,r)}}}),ga=N(function(a,b){var c=$(a),e=b&&$(b);a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};var f=function(p,k){var s;if(!p)return["C",k.x,k.y,k.x,k.y,k.x,k.y];!(p[0]in{T:1,Q:1})&&(k.qx=k.qy=null);switch(p[0]){case "M":k.X=p[1];k.Y=p[2];break;case "A":p=["C"].concat(Aa[G](0,[k.x,k.y].concat(p.slice(1))));break;case "S":s=k.x+(k.x-(k.bx||k.x));k=k.y+(k.y-(k.by||k.y));p=["C",s,k].concat(p.slice(1));break;case "T":k.qx=k.x+(k.x-(k.qx||k.x));k.qy=k.y+(k.y-(k.qy||k.y));p=["C"].concat(ya(k.x,k.y,k.qx,k.qy,p[1],p[2]));break;case "Q":k.qx=p[1];k.qy=p[2];p=["C"].concat(ya(k.x,k.y,p[1],p[2],p[3],p[4]));break;case "L":p=["C"].concat(ia(k.x,k.y,p[1],p[2]));break;case "H":p=["C"].concat(ia(k.x,k.y,p[1],k.y));break;case "V":p=["C"].concat(ia(k.x,k.y,k.x,p[1]));break;case "Z":p=["C"].concat(ia(k.x,k.y,k.X,k.Y));break}return p},d=function(p,k){if(p[k][n]>7){p[k].shift();for(var s=p[k];s[n];)p.splice(k++,0,["C"].concat(s.splice(0,6)));p.splice(k,1);h=P(c[n],e&&e[n]||0)}},i=function(p,k,s,H,y){if(p&&k&&p[y][0]=="M"&&k[y][0]!="M"){k.splice(y,0,["M",H.x,H.y]);s.bx=0;s.by=0;s.x=p[y][1];s.y=p[y][2];h=P(c[n],e&&e[n]||0)}},g=0,h=P(c[n],e&&e[n]||0);for(;g<h;g++){c[g]=f(c[g],a);d(c,g);e&&(e[g]=f(e[g],b));e&&d(e,g);i(c,e,a,b,g);i(e,c,b,a,g);var j=c[g],l=e&&e[g],o=j[n],r=e&&l[n];a.x=j[o-2];a.y=j[o-1];a.bx=x(j[o-4])||a.x;a.by=x(j[o-3])||a.y;b.bx=e&&(x(l[r-4])||b.x);b.by=e&&(x(l[r-3])||b.y);b.x=e&&l[r-2];b.y=e&&l[r-1]}return e?[c,e]:c},null,fa),Ba=N(function(a){for(var b=[],c=0,e=a[n];c<e;c++){var f={},d=a[c].match(/^([^:]*):?([\d\.]*)/);f.color=m.getRGB(d[1]);if(f.color.error)return null;f.color=f.color.hex;d[2]&&(f.offset=d[2]+"%");b[C](f)}c=1;for(e=b[n]-1;c<e;c++)if(!b[c].offset){a=x(b[c-1].offset||0);d=0;for(f=c+1;f<e;f++)if(b[f].offset){d=b[f].offset;break}if(!d){d=100;f=e}d=x(d);for(d=(d-a)/(f-c+1);c<f;c++){a+=d;b[c].offset=a+"%"}}return b}),Ca=function(){var a;if(m.is(arguments[0],"string")||m.is(arguments[0],"object")){a=m.is(arguments[0],"string")?A.getElementById(arguments[0]):arguments[0];if(a.tagName)return arguments[1]==null?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:arguments[1],height:arguments[2]}}else if(m.is(arguments[0],L)&&arguments[n]>3)return{container:1,x:arguments[0],y:arguments[1],width:arguments[2],height:arguments[3]}},oa=function(a,b){var c=this;for(var e in b)if(b[z](e)&&!(e in a))switch(typeof b[e]){case "function":(function(f){a[e]=a===c?f:function(){return f[G](c,arguments)}})(b[e]);break;case "object":a[e]=a[e]||{};oa.call(this,a[e],b[e]);break;default:a[e]=b[e];break}},Y=function(a,b){a==b.top&&(b.top=a.prev);a==b.bottom&&(b.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)},Da=function(a,b){if(b.top!==a){Y(a,b);a.next=null;a.prev=b.top;b.top.next=a;b.top=a}},Ea=function(a,b){if(b.bottom!==a){Y(a,b);a.next=b.bottom;a.prev=null;b.bottom.prev=a;b.bottom=a}},Fa=function(a,b,c){Y(a,c);b==c.top&&(c.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a},Ga=function(a,b,c){Y(a,c);b==c.bottom&&(c.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;b.prev=a;a.next=b},Ha=function(a){return function(){throw new Error("Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object");}},Ia=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/;if(m.svg){E[q].svgns="http://www.w3.org/2000/svg";E[q].xlink="http://www.w3.org/1999/xlink";B=function(a){return+a+(~~a===a)*0.5};var Za=function(a){for(var b=0,c=a[n];b<c;b++)if(T.call(a[b][0])!="a")for(var e=1,f=a[b][n];e<f;e++)a[b][e]=B(a[b][e]);else{a[b][6]=B(a[b][6]);a[b][7]=B(a[b][7])}return a},w=function(a,b){if(b)for(var c in b)b[z](c)&&a.setAttribute(c,b[c]);else return A.createElementNS(E[q].svgns,a)};m.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var Ja=function(a,b){var c=w("path");b.canvas&&b.canvas.appendChild(c);b=new t(c,b);b.type="path";R(b,{fill:"none",stroke:"#000",path:a});return b},ba=function(a,b,c){var e="linear",f=0.5,d=0.5,i=a.style;b=(b+"").replace(Ia,function(l,o,r){e="radial";if(o&&r){f=x(o);d=x(r);l=(d>0.5)*2-1;D(f-0.5,2)+D(d-0.5,2)>0.25&&(d=u.sqrt(0.25-D(f-0.5,2))*l+0.5)&&d!=0.5&&(d=d.toFixed(5)-1.0E-5*l)}return""});b=b.split(/\s*\-\s*/);if(e=="linear"){var g=b.shift();g=-x(g);if(isNaN(g))return null;var h=[0,0,u.cos(g*u.PI/180),u.sin(g*u.PI/180)];g=1/(P(u.abs(h[2]),u.abs(h[3]))||1);h[2]*=g;h[3]*=g;if(h[2]<0){h[0]=-h[2];h[2]=0}if(h[3]<0){h[1]=-h[3];h[3]=0}}b=Ba(b);if(!b)return null;g=w(e+"Gradient");g.id="r"+(m._id++).toString(36);w(g,e=="radial"?{fx:f,fy:d}:{x1:h[0],y1:h[1],x2:h[2],y2:h[3]});c.defs.appendChild(g);c=0;for(h=b[n];c<h;c++){var j=w("stop");w(j,{offset:b[c].offset?b[c].offset:!c?"0%":"100%","stop-color":b[c].color||"#fff"});g.appendChild(j)}w(a,{fill:"url(#"+g.id+")",opacity:1,"fill-opacity":1});i.fill="";i.opacity=1;return i.fillOpacity=1},pa=function(a){var b=a.getBBox();w(a.pattern,{patternTransform:m.format("translate({0},{1})",b.x,b.y)})},R=function(a,b){var c={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},e=a.node,f=a.attrs,d=a.rotate(),i=function(k,s){if(s=c[T.call(s)]){var H=k.attrs["stroke-width"]||"1";k={round:H,square:H,butt:0}[k.attrs["stroke-linecap"]||b["stroke-linecap"]]||0;for(var y=[],v=s[n];v--;)y[v]=s[v]*H+(v%2?1:-1)*k;w(e,{"stroke-dasharray":y[J](",")})}};b[z]("rotation")&&(d=b.rotation);var g=(d+"").split(O);if(g.length-1){g[1]=+g[1];g[2]=+g[2]}else g=null;x(d)&&a.rotate(0,true);for(var h in b)if(b[z](h))if(da[z](h)){var j=b[h];f[h]=j;switch(h){case "rotation":a.rotate(j,true);break;case "href":case "title":case "target":var l=e.parentNode;if(T.call(l.tagName)!="a"){var o=w("a");l.insertBefore(o,e);o.appendChild(e);l=o}l.setAttributeNS(a.paper.xlink,h,j);break;case "cursor":e.style.cursor=j;break;case "clip-rect":l=(j+"").split(O);if(l[n]==4){a.clip&&a.clip.parentNode.parentNode.removeChild(a.clip.parentNode);var r=w("clipPath");o=w("rect");r.id="r"+(m._id++).toString(36);w(o,{x:l[0],y:l[1],width:l[2],height:l[3]});r.appendChild(o);a.paper.defs.appendChild(r);w(e,{"clip-path":"url(#"+r.id+")"});a.clip=o}if(!j){(j=A.getElementById(e.getAttribute("clip-path").replace(/(^url\(#|\)$)/g,"")))&&j.parentNode.removeChild(j);w(e,{"clip-path":""});delete a.clip}break;case "path":if(j&&a.type=="path"){f.path=Za($(j));w(e,{d:f.path})}break;case "width":e.setAttribute(h,j);if(f.fx){h="x";j=f.x}else break;case "x":if(f.fx)j=-f.x-(f.width||0);case "rx":if(h=="rx"&&a.type=="rect")break;case "cx":g&&(h=="x"||h=="cx")&&(g[1]+=j-f[h]);e.setAttribute(h,B(j));a.pattern&&pa(a);break;case "height":e.setAttribute(h,j);if(f.fy){h="y";j=f.y}else break;case "y":if(f.fy)j=-f.y-(f.height||0);case "ry":if(h=="ry"&&a.type=="rect")break;case "cy":g&&(h=="y"||h=="cy")&&(g[2]+=j-f[h]);e.setAttribute(h,B(j));a.pattern&&pa(a);break;case "r":a.type=="rect"?w(e,{rx:j,ry:j}):e.setAttribute(h,j);break;case "src":a.type=="image"&&e.setAttributeNS(a.paper.xlink,"href",j);break;case "stroke-width":e.style.strokeWidth=j;e.setAttribute(h,j);f["stroke-dasharray"]&&i(a,f["stroke-dasharray"]);break;case "stroke-dasharray":i(a,j);break;case "translation":j=(j+"").split(O);j[0]=+j[0]||0;j[1]=+j[1]||0;if(g){g[1]+=j[0];g[2]+=j[1]}ka.call(a,j[0],j[1]);break;case "scale":j=(j+"").split(O);a.scale(+j[0]||1,+j[1]||+j[0]||1,+j[2]||null,+j[3]||null);break;case "fill":if(l=(j+"").match(wa)){r=w("pattern");var p=w("image");r.id="r"+(m._id++).toString(36);w(r,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});w(p,{x:0,y:0});p.setAttributeNS(a.paper.xlink,"href",l[1]);r.appendChild(p);j=A.createElement("img");j.style.cssText="position:absolute;left:-9999em;top-9999em";j.onload=function(){w(r,{width:this.offsetWidth,height:this.offsetHeight});w(p,{width:this.offsetWidth,height:this.offsetHeight});A.body.removeChild(this);a.paper.safari()};A.body.appendChild(j);j.src=l[1];a.paper.defs.appendChild(r);e.style.fill="url(#"+r.id+")";w(e,{fill:"url(#"+r.id+")"});a.pattern=r;a.pattern&&pa(a);break}if(m.getRGB(j).error){if(({circle:1,ellipse:1}[z](a.type)||(j+"").charAt()!="r")&&ba(e,j,a.paper)){f.gradient=j;f.fill="none";break}}else{delete b.gradient;delete f.gradient;!m.is(f.opacity,"undefined")&&m.is(b.opacity,"undefined")&&w(e,{opacity:f.opacity});!m.is(f["fill-opacity"],"undefined")&&m.is(b["fill-opacity"],"undefined")&&w(e,{"fill-opacity":f["fill-opacity"]})}case "stroke":e.setAttribute(h,m.getRGB(j).hex);break;case "gradient":(({circle:1,ellipse:1})[z](a.type)||(j+"").charAt()!="r")&&ba(e,j,a.paper);break;case "opacity":case "fill-opacity":if(f.gradient){if(l=A.getElementById(e.getAttribute("fill").replace(/^url\(#|\)$/g,""))){l=l.getElementsByTagName("stop");l[l[n]-1].setAttribute("stop-opacity",j)}break}default:h=="font-size"&&(j=U(j,10)+"px");l=h.replace(/(\-.)/g,function(k){return ca.call(k.substring(1))});e.style[l]=j;e.setAttribute(h,j);break}}$a(a,b);if(g)a.rotate(g.join(K));else x(d)&&a.rotate(d,true)},$a=function(a,b){if(!(a.type!="text"||!(b[z]("text")||b[z]("font")||b[z]("font-size")||b[z]("x")||b[z]("y")))){var c=a.attrs,e=a.node,f=e.firstChild?U(A.defaultView.getComputedStyle(e.firstChild,"").getPropertyValue("font-size"),10):10;if(b[z]("text")){for(c.text=b.text;e.firstChild;)e.removeChild(e.firstChild);b=(b.text+"").split("\n");for(var d=0,i=b[n];d<i;d++)if(b[d]){var g=w("tspan");d&&w(g,{dy:f*1.2,x:c.x});g.appendChild(A.createTextNode(b[d]));e.appendChild(g)}}else{b=e.getElementsByTagName("tspan");d=0;for(i=b[n];d<i;d++)d&&w(b[d],{dy:f*1.2,x:c.x})}w(e,{y:c.y});a=a.getBBox();(a=c.y-(a.y+a.height/2))&&isFinite(a)&&w(e,{y:c.y+a})}},t=function(a,b){this[0]=a;this.id=m._oid++;this.node=a;a.raphael=this;this.paper=b;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&(b.top.next=this);b.top=this;this.next=null};t[q].rotate=function(a,b,c){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][J](K);return this._.rt.deg}var e=this.getBBox();a=(a+"").split(O);if(a[n]-1){b=x(a[1]);c=x(a[2])}a=x(a[0]);if(b!=null)this._.rt.deg=a;else this._.rt.deg+=a;c==null&&(b=null);this._.rt.cx=b;this._.rt.cy=c;b=b==null?e.x+e.width/2:b;c=c==null?e.y+e.height/2:c;if(this._.rt.deg){this.transformations[0]=m.format("rotate({0} {1} {2})",this._.rt.deg,b,c);this.clip&&w(this.clip,{transform:m.format("rotate({0} {1} {2})",-this._.rt.deg,b,c)})}else{this.transformations[0]="";this.clip&&w(this.clip,{transform:""})}w(this.node,{transform:this.transformations[J](K)});return this};t[q].hide=function(){!this.removed&&(this.node.style.display="none");return this};t[q].show=function(){!this.removed&&(this.node.style.display="");return this};t[q].remove=function(){if(!this.removed){Y(this,this.paper);this.node.parentNode.removeChild(this.node);for(var a in this)delete this[a];this.removed=true}};t[q].getBBox=function(){if(this.removed)return this;if(this.type=="path")return ha(this.attrs.path);if(this.node.style.display=="none"){this.show();var a=true}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}if(this.type=="text"){b={x:b.x,y:Infinity,width:0,height:0};for(var e=0,f=this.node.getNumberOfChars();e<f;e++){var d=this.node.getExtentOfChar(e);d.y<b.y&&(b.y=d.y);d.y+d.height-b.y>b.height&&(b.height=d.y+d.height-b.y);d.x+d.width-b.x>b.width&&(b.width=d.x+d.width-b.x)}}a&&this.hide();return b};t[q].attr=function(){if(this.removed)return this;if(arguments[n]==0){var a={};for(var b in this.attrs)if(this.attrs[z](b))a[b]=this.attrs[b];this._.rt.deg&&(a.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(a.scale=this.scale());a.gradient&&a.fill=="none"&&(a.fill=a.gradient)&&delete a.gradient;return a}if(arguments[n]==1&&m.is(arguments[0],"string")){if(arguments[0]=="translation")return ka.call(this);if(arguments[0]=="rotation")return this.rotate();if(arguments[0]=="scale")return this.scale();if(arguments[0]=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[arguments[0]]}if(arguments[n]==1&&m.is(arguments[0],"array")){b={};for(a in arguments[0])if(arguments[0][z](a))b[arguments[0][a]]=this.attrs[arguments[0][a]];return b}if(arguments[n]==2){b={};b[arguments[0]]=arguments[1];R(this,b)}else arguments[n]==1&&m.is(arguments[0],"object")&&R(this,arguments[0]);return this};t[q].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var a=this.paper;a.top!=this&&Da(this,a);return this};t[q].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);Ea(this,this.paper)}return this};t[q].insertAfter=function(a){if(this.removed)return this;var b=a.node;b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode.appendChild(this.node);Fa(this,a,this.paper);return this};t[q].insertBefore=function(a){if(this.removed)return this;var b=a.node;b.parentNode.insertBefore(this.node,b);Ga(this,a,this.paper);return this};var Ka=function(a,b,c,e){b=B(b);c=B(c);var f=w("circle");a.canvas&&a.canvas.appendChild(f);a=new t(f,a);a.attrs={cx:b,cy:c,r:e,fill:"none",stroke:"#000"};a.type="circle";w(f,a.attrs);return a},La=function(a,b,c,e,f,d){b=B(b);c=B(c);var i=w("rect");a.canvas&&a.canvas.appendChild(i);a=new t(i,a);a.attrs={x:b,y:c,width:e,height:f,r:d||0,rx:d||0,ry:d||0,fill:"none",stroke:"#000"};a.type="rect";w(i,a.attrs);return a},Ma=function(a,b,c,e,f){b=B(b);c=B(c);var d=w("ellipse");a.canvas&&a.canvas.appendChild(d);a=new t(d,a);a.attrs={cx:b,cy:c,rx:e,ry:f,fill:"none",stroke:"#000"};a.type="ellipse";w(d,a.attrs);return a},Na=function(a,b,c,e,f,d){var i=w("image");w(i,{x:c,y:e,width:f,height:d,preserveAspectRatio:"none"});i.setAttributeNS(a.xlink,"href",b);a.canvas&&a.canvas.appendChild(i);a=new t(i,a);a.attrs={x:c,y:e,width:f,height:d,src:b};a.type="image";return a},Oa=function(a,b,c,e){var f=w("text");w(f,{x:b,y:c,"text-anchor":"middle"});a.canvas&&a.canvas.appendChild(f);a=new t(f,a);a.attrs={x:b,y:c,"text-anchor":"middle",text:e,font:da.font,stroke:"none",fill:"#000"};a.type="text";R(a,a.attrs);return a},Pa=function(a,b){this.width=a||this.width;this.height=b||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);return this},ma=function(){var a=Ca[G](null,arguments),b=a&&a.container,c=a.x,e=a.y,f=a.width;a=a.height;if(!b)throw new Error("SVG container not found.");var d=w("svg");f=f||512;a=a||342;w(d,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:f,height:a});if(b==1){d.style.cssText="position:absolute;left:"+c+"px;top:"+e+"px";A.body.appendChild(d)}else b.firstChild?b.insertBefore(d,b.firstChild):b.appendChild(d);b=new E;b.width=f;b.height=a;b.canvas=d;oa.call(b,b,m.fn);b.clear();return b};E[q].clear=function(){for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;(this.desc=w("desc")).appendChild(A.createTextNode("Created with Rapha\u00ebl"));a.appendChild(this.desc);a.appendChild(this.defs=w("defs"))};E[q].remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=Ha(a)}}if(m.vml){var ab=function(a){var b=/[ahqstv]/ig,c=$;(a+"").match(b)&&(c=ga);b=/[clmz]/g;if(c==$&&!(a+"").match(b)){var e={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},f=/-?[^,\s-]+/g;return a=(a+"").replace(/([clmz]),?([^clmz]*)/gi,function(l,o,r){var p=[];r.replace(f,function(k){p[C](B(k))});return e[o]+p})}b=c(a);a=[];for(var d,i=0,g=b[n];i<g;i++){c=b[i];d=T.call(b[i][0]);d=="z"&&(d="x");for(var h=1,j=c[n];h<j;h++)d+=B(c[h])+(h!=j-1?",":"");a[C](d)}return a[J](K)};m.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};Ja=function(a,b){var c=I("group");c.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";c.coordsize=b.coordsize;c.coordorigin=b.coordorigin;var e=I("shape"),f=e.style;f.width=b.width+"px";f.height=b.height+"px";e.coordsize=this.coordsize;e.coordorigin=this.coordorigin;c.appendChild(e);e=new t(e,c,b);e.isAbsolute=true;e.type="path";e.path=[];e.Path="";a&&R(e,{fill:"none",stroke:"#000",path:a});b.canvas.appendChild(c);return e};R=function(a,b){a.attrs=a.attrs||{};var c=a.node,e=a.attrs,f=c.style,d;for(d in b)if(b[z](d))e[d]=b[d];b.href&&(c.href=b.href);b.title&&(c.title=b.title);b.target&&(c.target=b.target);b.cursor&&(f.cursor=b.cursor);if(b.path&&a.type=="path"){e.path=b.path;c.path=ab(e.path)}b.rotation!=null&&a.rotate(b.rotation,true);if(b.translation){d=(b.translation+"").split(O);ka.call(a,d[0],d[1]);if(a._.rt.cx!=null){a._.rt.cx+=+d[0];a._.rt.cy+=+d[1];a.setBox(a.attrs,d[0],d[1])}}if(b.scale){d=(b.scale+"").split(O);a.scale(+d[0]||1,+d[1]||+d[0]||1,+d[2]||null,+d[3]||null)}if("clip-rect"in b){d=(b["clip-rect"]+"").split(O);if(d[n]==4){d[2]=+d[2]+ +d[0];d[3]=+d[3]+ +d[1];var i=c.clipRect||A.createElement("div"),g=i.style,h=c.parentNode;g.clip=m.format("rect({1}px {2}px {3}px {0}px)",d);if(!c.clipRect){g.position="absolute";g.top=0;g.left=0;g.width=a.paper.width+"px";g.height=a.paper.height+"px";h.parentNode.insertBefore(i,h);i.appendChild(h);c.clipRect=i}}if(!b["clip-rect"])c.clipRect&&(c.clipRect.style.clip="")}if(a.type=="image"&&b.src)c.src=b.src;if(a.type=="image"&&b.opacity){c.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+b.opacity*100+")";f.filter=(c.filterMatrix||"")+(c.filterOpacity||"")}b.font&&(f.font=b.font);b["font-family"]&&(f.fontFamily='"'+b["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"');b["font-size"]&&(f.fontSize=b["font-size"]);b["font-weight"]&&(f.fontWeight=b["font-weight"]);b["font-style"]&&(f.fontStyle=b["font-style"]);if(b.opacity!=null||b["stroke-width"]!=null||b.fill!=null||b.stroke!=null||b["stroke-width"]!=null||b["stroke-opacity"]!=null||b["fill-opacity"]!=null||b["stroke-dasharray"]!=null||b["stroke-miterlimit"]!=null||b["stroke-linejoin"]!=null||b["stroke-linecap"]!=null){c=a.shape||c;d=c.getElementsByTagName("fill")&&c.getElementsByTagName("fill")[0];i=false;!d&&(i=d=I("fill"));if("fill-opacity"in b||"opacity"in b){f=((+e["fill-opacity"]+1||2)-1)*((+e.opacity+1||2)-1);f<0&&(f=0);f>1&&(f=1);d.opacity=f}b.fill&&(d.on=true);if(d.on==null||b.fill=="none")d.on=false;if(d.on&&b.fill)if(f=b.fill.match(wa)){d.src=f[1];d.type="tile"}else{d.color=m.getRGB(b.fill).hex;d.src="";d.type="solid";if(m.getRGB(b.fill).error&&(a.type in{circle:1,ellipse:1}||(b.fill+"").charAt()!="r")&&ba(a,b.fill)){e.fill="none";e.gradient=b.fill}}i&&c.appendChild(d);d=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0];i=false;!d&&(i=d=I("stroke"));if(b.stroke&&b.stroke!="none"||b["stroke-width"]||b["stroke-opacity"]!=null||b["stroke-dasharray"]||b["stroke-miterlimit"]||b["stroke-linejoin"]||b["stroke-linecap"])d.on=true;(b.stroke=="none"||d.on==null||b.stroke==0||b["stroke-width"]==0)&&(d.on=false);d.on&&b.stroke&&(d.color=m.getRGB(b.stroke).hex);f=((+e["stroke-opacity"]+1||2)-1)*((+e.opacity+1||2)-1);g=(x(b["stroke-width"])||1)*0.75;f<0&&(f=0);f>1&&(f=1);b["stroke-width"]==null&&(g=e["stroke-width"]);b["stroke-width"]&&(d.weight=g);g&&g<1&&(f*=g)&&(d.weight=1);d.opacity=f;b["stroke-linejoin"]&&(d.joinstyle=b["stroke-linejoin"]||"miter");d.miterlimit=b["stroke-miterlimit"]||8;b["stroke-linecap"]&&(d.endcap=b["stroke-linecap"]=="butt"?"flat":b["stroke-linecap"]=="square"?"square":"round");if(b["stroke-dasharray"]){f={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};d.dashstyle=f[z](b["stroke-dasharray"])?f[b["stroke-dasharray"]]:""}i&&c.appendChild(d)}if(a.type=="text"){f=a.paper.span.style;e.font&&(f.font=e.font);e["font-family"]&&(f.fontFamily=e["font-family"]);e["font-size"]&&(f.fontSize=e["font-size"]);e["font-weight"]&&(f.fontWeight=e["font-weight"]);e["font-style"]&&(f.fontStyle=e["font-style"]);a.node.string&&(a.paper.span.innerHTML=(a.node.string+"").replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));a.W=e.w=a.paper.span.offsetWidth;a.H=e.h=a.paper.span.offsetHeight;a.X=e.x;a.Y=e.y+B(a.H/2);switch(e["text-anchor"]){case "start":a.node.style["v-text-align"]="left";a.bbx=B(a.W/2);break;case "end":a.node.style["v-text-align"]="right";a.bbx=-B(a.W/2);break;default:a.node.style["v-text-align"]="center";break}}};ba=function(a,b){a.attrs=a.attrs||{};var c=a.node.getElementsByTagName("fill"),e="linear",f=".5 .5";a.attrs.gradient=b;b=(b+"").replace(Ia,function(h,j,l){e="radial";if(j&&l){j=x(j);l=x(l);D(j-0.5,2)+D(l-0.5,2)>0.25&&(l=u.sqrt(0.25-D(j-0.5,2))*((l>0.5)*2-1)+0.5);f=j+K+l}return""});b=b.split(/\s*\-\s*/);if(e=="linear"){var d=b.shift();d=-x(d);if(isNaN(d))return null}b=Ba(b);if(!b)return null;a=a.shape||a.node;c=c[0]||I("fill");if(b[n]){c.on=true;c.method="none";c.type=e=="radial"?"gradientradial":"gradient";c.color=b[0].color;c.color2=b[b[n]-1].color;a=[];for(var i=0,g=b[n];i<g;i++)b[i].offset&&a[C](b[i].offset+K+b[i].color);c.colors&&(c.colors.value=a[n]?a[J](","):"0% "+c.color);if(e=="radial"){c.focus="100%";c.focussize=f;c.focusposition=f}else c.angle=(270-d)%360}return 1};t=function(a,b,c){this[0]=a;this.id=m._oid++;this.node=a;a.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=b;this.paper=c;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!c.bottom&&(c.bottom=this);(this.prev=c.top)&&(c.top.next=this);c.top=this;this.next=null};t[q].rotate=function(a,b,c){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][J](K);return this._.rt.deg}a=(a+"").split(O);if(a[n]-1){b=x(a[1]);c=x(a[2])}a=x(a[0]);if(b!=null)this._.rt.deg=a;else this._.rt.deg+=a;c==null&&(b=null);this._.rt.cx=b;this._.rt.cy=c;this.setBox(this.attrs,b,c);this.Group.style.rotation=this._.rt.deg;return this};t[q].setBox=function(a,b,c){if(this.removed)return this;var e=this.Group.style,f=this.shape&&this.shape.style||this.node.style;a=a||{};for(var d in a)if(a[z](d))this.attrs[d]=a[d];b=b||this._.rt.cx;c=c||this._.rt.cy;var i=this.attrs,g,h,j;switch(this.type){case "circle":d=i.cx-i.r;g=i.cy-i.r;h=j=i.r*2;break;case "ellipse":d=i.cx-i.rx;g=i.cy-i.ry;h=i.rx*2;j=i.ry*2;break;case "rect":case "image":d=+i.x;g=+i.y;h=i.width||0;j=i.height||0;break;case "text":this.textpath.v=["m",B(i.x),", ",B(i.y-2),"l",B(i.x)+1,", ",B(i.y-2)][J]("");d=i.x-B(this.W/2);g=i.y-this.H/2;h=this.W;j=this.H;break;case "path":if(this.attrs.path){j=ha(this.attrs.path);d=j.x;g=j.y;h=j.width;j=j.height}else{g=d=0;h=this.paper.width;j=this.paper.height}break;default:g=d=0;h=this.paper.width;j=this.paper.height;break}b=b==null?d+h/2:b;c=c==null?g+j/2:c;b=b-this.paper.width/2;c=c-this.paper.height/2;if(this.type=="path"||this.type=="text"){e.left!=b+"px"&&(e.left=b+"px");e.top!=c+"px"&&(e.top=c+"px");this.X=this.type=="text"?d:-b;this.Y=this.type=="text"?g:-c;this.W=h;this.H=j;f.left!=-b+"px"&&(f.left=-b+"px");f.top!=-c+"px"&&(f.top=-c+"px")}else{e.left!=b+"px"&&(e.left=b+"px");e.top!=c+"px"&&(e.top=c+"px");this.X=d;this.Y=g;this.W=h;this.H=j;e.width!=this.paper.width+"px"&&(e.width=this.paper.width+"px");e.height!=this.paper.height+"px"&&(e.height=this.paper.height+"px");f.left!=d-b+"px"&&(f.left=d-b+"px");f.top!=g-c+"px"&&(f.top=g-c+"px");f.width!=h+"px"&&(f.width=h+"px");f.height!=j+"px"&&(f.height=j+"px");a=(+a.r||0)/Q(h,j);if(this.type=="rect"&&this.arcsize.toFixed(4)!=a.toFixed(4)&&(a||this.arcsize)){e=I("roundrect");f={};d=0;c=this.events&&this.events[n];e.arcsize=a;e.raphael=this;this.Group.appendChild(e);this.Group.removeChild(this.node);this[0]=this.node=e;this.arcsize=a;for(d in i)f[d]=i[d];delete f.scale;this.attr(f);if(this.events)for(;d<c;d++)this.events[d].unbind=Qa(this.node,this.events[d].name,this.events[d].f,this)}}};t[q].hide=function(){!this.removed&&(this.Group.style.display="none");return this};t[q].show=function(){!this.removed&&(this.Group.style.display="block");return this};t[q].getBBox=function(){if(this.removed)return this;if(this.type=="path")return ha(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};t[q].remove=function(){if(!this.removed){Y(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)delete this[a];this.removed=true}};t[q].attr=function(){if(this.removed)return this;if(arguments[n]==0){var a={};for(var b in this.attrs)if(this.attrs[z](b))a[b]=this.attrs[b];this._.rt.deg&&(a.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(a.scale=this.scale());a.gradient&&a.fill=="none"&&(a.fill=a.gradient)&&delete a.gradient;return a}if(arguments[n]==1&&m.is(arguments[0],"string")){if(arguments[0]=="translation")return ka.call(this);if(arguments[0]=="rotation")return this.rotate();if(arguments[0]=="scale")return this.scale();if(arguments[0]=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[arguments[0]]}if(this.attrs&&arguments[n]==1&&m.is(arguments[0],"array")){a={};b=0;for(var c=arguments[0][n];b<c;b++)a[arguments[0][b]]=this.attrs[arguments[0][b]];return a}if(arguments[n]==2){a={};a[arguments[0]]=arguments[1]}arguments[n]==1&&m.is(arguments[0],"object")&&(a=arguments[0]);if(a){if(a.text&&this.type=="text")this.node.string=a.text;R(this,a);if(a.gradient&&({circle:1,ellipse:1}[z](this.type)||(a.gradient+"").charAt()!="r"))ba(this,a.gradient);(this.type!="path"||this._.rt.deg)&&this.setBox(this.attrs)}return this};t[q].toFront=function(){!this.removed&&this.Group.parentNode.appendChild(this.Group);this.paper.top!=this&&Da(this,this.paper);return this};t[q].toBack=function(){if(this.removed)return this;if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);Ea(this,this.paper)}return this};t[q].insertAfter=function(a){if(this.removed)return this;a.Group.nextSibling?a.Group.parentNode.insertBefore(this.Group,a.Group.nextSibling):a.Group.parentNode.appendChild(this.Group);Fa(this,a,this.paper);return this};t[q].insertBefore=function(a){if(this.removed)return this;a.Group.parentNode.insertBefore(this.Group,a.Group);Ga(this,a,this.paper);return this};Ka=function(a,b,c,e){var f=I("group"),d=I("oval");f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";f.coordsize=a.coordsize;f.coordorigin=a.coordorigin;f.appendChild(d);d=new t(d,f,a);d.type="circle";R(d,{stroke:"#000",fill:"none"});d.attrs.cx=b;d.attrs.cy=c;d.attrs.r=e;d.setBox({x:b-e,y:c-e,width:e*2,height:e*2});a.canvas.appendChild(f);return d};La=function(a,b,c,e,f,d){var i=I("group"),g=I("roundrect"),h=(+d||0)/Q(e,f);i.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";i.coordsize=a.coordsize;i.coordorigin=a.coordorigin;i.appendChild(g);g.arcsize=h;g=new t(g,i,a);g.type="rect";R(g,{stroke:"#000"});g.arcsize=h;g.setBox({x:b,y:c,width:e,height:f,r:d});a.canvas.appendChild(i);return g};Ma=function(a,b,c,e,f){var d=I("group"),i=I("oval");d.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";d.coordsize=a.coordsize;d.coordorigin=a.coordorigin;d.appendChild(i);i=new t(i,d,a);i.type="ellipse";R(i,{stroke:"#000"});i.attrs.cx=b;i.attrs.cy=c;i.attrs.rx=e;i.attrs.ry=f;i.setBox({x:b-e,y:c-f,width:e*2,height:f*2});a.canvas.appendChild(d);return i};Na=function(a,b,c,e,f,d){var i=I("group"),g=I("image");i.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";i.coordsize=a.coordsize;i.coordorigin=a.coordorigin;g.src=b;i.appendChild(g);g=new t(g,i,a);g.type="image";g.attrs.src=b;g.attrs.x=c;g.attrs.y=e;g.attrs.w=f;g.attrs.h=d;g.setBox({x:c,y:e,width:f,height:d});a.canvas.appendChild(i);return g};Oa=function(a,b,c,e){var f=I("group"),d=I("shape"),i=d.style,g=I("path"),h=I("textpath");f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";f.coordsize=a.coordsize;f.coordorigin=a.coordorigin;g.v=m.format("m{0},{1}l{2},{1}",B(b),B(c),B(b)+1);g.textpathok=true;i.width=a.width;i.height=a.height;h.string=e+"";h.on=true;d.appendChild(h);d.appendChild(g);f.appendChild(d);i=new t(h,f,a);i.shape=d;i.textpath=g;i.type="text";i.attrs.text=e;i.attrs.x=b;i.attrs.y=c;i.attrs.w=1;i.attrs.h=1;R(i,{font:da.font,stroke:"none",fill:"#000"});i.setBox();a.canvas.appendChild(f);return i};Pa=function(a,b){var c=this.canvas.style;a==+a&&(a+="px");b==+b&&(b+="px");c.width=a;c.height=b;c.clip="rect(0 "+a+" "+b+" 0)";return this};var I;A.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!A.namespaces.rvml&&A.namespaces.add("rvml","urn:schemas-microsoft-com:vml");I=function(a){return A.createElement("<rvml:"+a+' class="rvml">')}}catch(cb){I=function(a){return A.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}ma=function(){var a=Ca[G](null,arguments),b=a.container,c=a.height,e=a.width,f=a.x;a=a.y;if(!b)throw new Error("VML container not found.");var d=new E,i=d.canvas=A.createElement("div"),g=i.style;e=e||512;c=c||342;e==+e&&(e+="px");c==+c&&(c+="px");d.width=1E3;d.height=1E3;d.coordsize="1000 1000";d.coordorigin="0 0";d.span=A.createElement("span");d.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";i.appendChild(d.span);g.cssText=m.format("width:{0};height:{1};position:absolute;clip:rect(0 {0} {1} 0);overflow:hidden",e,c);if(b==1){A.body.appendChild(i);g.left=f+"px";g.top=a+"px"}else{b.style.width=e;b.style.height=c;b.firstChild?b.insertBefore(i,b.firstChild):b.appendChild(i)}oa.call(d,d,m.fn);return d};E[q].clear=function(){this.canvas.innerHTML="";this.span=A.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};E[q].remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=Ha(a)}}E[q].safari=/^Apple|^Google/.test(navigator.vendor)&&!(navigator.userAgent.indexOf("Version/4.0")+1)?function(){var a=this.rect(-99,-99,this.width+99,this.height+99);setTimeout(function(){a.remove()})}:function(){};var Qa=function(){if(A.addEventListener)return function(a,b,c,e){var f=function(d){return c.call(e,d)};a.addEventListener(b,f,false);return function(){a.removeEventListener(b,f,false);return true}};else if(A.attachEvent)return function(a,b,c,e){var f=function(d){return c.call(e,d||V.event)};a.attachEvent("on"+b,f);return function(){a.detachEvent("on"+b,f);return true}}}();for(Z=W[n];Z--;)(function(a){t[q][a]=function(b){if(m.is(b,"function")){this.events=this.events||[];this.events.push({name:a,f:b,unbind:Qa(this.shape||this.node,a,b,this)})}return this};t[q]["un"+a]=function(b){for(var c=this.events,e=c[n];e--;)if(c[e].name==a&&c[e].f==b){c[e].unbind();c.splice(e,1);!c.length&&delete this.events;return this}return this}})(W[Z]);t[q].hover=function(a,b){return this.mouseover(a).mouseout(b)};t[q].unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};E[q].circle=function(a,b,c){return Ka(this,a||0,b||0,c||0)};E[q].rect=function(a,b,c,e,f){return La(this,a||0,b||0,c||0,e||0,f||0)};E[q].ellipse=function(a,b,c,e){return Ma(this,a||0,b||0,c||0,e||0)};E[q].path=function(a){a&&!m.is(a,"string")&&!m.is(a[0],"array")&&(a+="");return Ja(m.format[G](m,arguments),this)};E[q].image=function(a,b,c,e,f){return Na(this,a||"about:blank",b||0,c||0,e||0,f||0)};E[q].text=function(a,b,c){return Oa(this,a||0,b||0,c||"")};E[q].set=function(a){arguments[n]>1&&(a=Array[q].splice.call(arguments,0,arguments[n]));return new S(a)};E[q].setSize=Pa;E[q].top=E[q].bottom=null;E[q].raphael=m;t[q].scale=function(a,b,c,e){if(a==null&&b==null)return{x:this._.sx,y:this._.sy,toString:ta};b=b||a;!+b&&(b=a);var f,d,i=this.attrs;if(a!=0){var g=this.getBBox(),h=g.x+g.width/2,j=g.y+g.height/2;f=a/this._.sx;d=b/this._.sy;c=+c||c==0?c:h;e=+e||e==0?e:j;g=~~(a/u.abs(a));var l=~~(b/u.abs(b)),o=this.node.style,r=c+(h-c)*f;j=e+(j-e)*d;switch(this.type){case "rect":case "image":var p=i.width*g*f,k=i.height*l*d;this.attr({height:k,r:i.r*Q(g*f,l*d),width:p,x:r-p/2,y:j-k/2});break;case "circle":case "ellipse":this.attr({rx:i.rx*g*f,ry:i.ry*l*d,r:i.r*Q(g*f,l*d),cx:r,cy:j});break;case "path":h=xa(i.path);for(var s=true,H=0,y=h[n];H<y;H++){var v=h[H],F;F=ca.call(v[0]);if(!(F=="M"&&s)){s=false;if(F=="A"){v[h[H][n]-2]*=f;v[h[H][n]-1]*=d;v[1]*=g*f;v[2]*=l*d;v[5]=+(g+l?!!+v[5]:!+v[5])}else if(F=="H"){F=1;for(jj=v[n];F<jj;F++)v[F]*=f}else if(F=="V"){F=1;for(jj=v[n];F<jj;F++)v[F]*=d}else{F=1;for(jj=v[n];F<jj;F++)v[F]*=F%2?f:d}}}d=ha(h);f=r-d.x-d.width/2;d=j-d.y-d.height/2;h[0][1]+=f;h[0][2]+=d;this.attr({path:h});break}if(this.type in{text:1,image:1}&&(g!=1||l!=1))if(this.transformations){this.transformations[2]="scale(".concat(g,",",l,")");this.node.setAttribute("transform",this.transformations[J](K));f=g==-1?-i.x-(p||0):i.x;d=l==-1?-i.y-(k||0):i.y;this.attr({x:f,y:d});i.fx=g-1;i.fy=l-1}else{this.node.filterMatrix=" progid:DXImageTransform.Microsoft.Matrix(M11=".concat(g,", M12=0, M21=0, M22=",l,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");o.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||"")}else if(this.transformations){this.transformations[2]="";this.node.setAttribute("transform",this.transformations[J](K));i.fx=0;i.fy=0}else{this.node.filterMatrix="";o.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||"")}i.scale=[a,b,c,e][J](K);this._.sx=a;this._.sy=b}return this};t[q].clone=function(){var a=this.attr();delete a.scale;delete a.translation;return this.paper[this.type]().attr(a)};W=function(a,b){return function(c,e,f){c=ga(c);for(var d,i,g,h,j="",l={},o=0,r=0,p=c.length;r<p;r++){g=c[r];if(g[0]=="M"){d=+g[1];i=+g[2]}else{h=bb(d,i,g[1],g[2],g[3],g[4],g[5],g[6]);if(o+h>e){if(b&&!l.start){d=m.findDotsAtSegment(d,i,g[1],g[2],g[3],g[4],g[5],g[6],(e-o)/h);j+=["C",d.start.x,d.start.y,d.m.x,d.m.y,d.x,d.y];if(f)return j;l.start=j;j=["M",d.x,d.y+"C",d.n.x,d.n.y,d.end.x,d.end.y,g[5],g[6]][J]();o+=h;d=+g[5];i=+g[6];continue}if(!a&&!b){d=m.findDotsAtSegment(d,i,g[1],g[2],g[3],g[4],g[5],g[6],(e-o)/h);return{x:d.x,y:d.y,alpha:d.alpha}}}o+=h;d=+g[5];i=+g[6]}j+=g}l.end=j;d=a?o:b?l:m.findDotsAtSegment(d,i,g[1],g[2],g[3],g[4],g[5],g[6],1);d.alpha&&(d={x:d.x,y:d.y,alpha:d.alpha});return d}};var bb=N(function(a,b,c,e,f,d,i,g){for(var h={x:0,y:0},j=0,l=0;l<1.01;l+=0.01){var o=aa(a,b,c,e,f,d,i,g,l);l&&(j+=u.sqrt(D(h.x-o.x,2)+D(h.y-o.y,2)));h=o}return j}),Ra=W(1),la=W(),qa=W(0,1);t[q].getTotalLength=function(){if(this.type=="path")return Ra(this.attrs.path)};t[q].getPointAtLength=function(a){if(this.type=="path")return la(this.attrs.path,a)};t[q].getSubpath=function(a,b){if(this.type=="path"){if(u.abs(this.getTotalLength()-b)<1.0E-6)return qa(this.attrs.path,a).end;b=qa(this.attrs.path,b,1);return a?qa(b,a).end:b}};m.easing_formulas={linear:function(a){return a},"<":function(a){return D(a,3)},">":function(a){return D(a-1,3)+1},"<>":function(a){a*=2;if(a<1)return D(a,3)/2;a-=2;return(D(a,3)+2)/2},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){if(a==0||a==1)return a;return D(2,-10*a)*u.sin((a-0.075)*2*u.PI/0.3)+1},bounce:function(a){if(a<1/2.75)a=7.5625*a*a;else if(a<2/2.75){a-=1.5/2.75;a=7.5625*a*a+0.75}else if(a<2.5/2.75){a-=2.25/2.75;a=7.5625*a*a+0.9375}else{a-=2.625/2.75;a=7.5625*a*a+0.984375}return a}};var M={length:0},Sa=function(){var a=+new Date;for(var b in M)if(b!="length"&&M[z](b)){var c=M[b];if(c.stop){delete M[b];M[n]--}else{var e=a-c.start,f=c.ms,d=c.easing,i=c.from,g=c.diff,h=c.to,j=c.t,l=c.prev||0,o=c.el,r=c.callback,p={},k;if(e<f){r=m.easing_formulas[d]?m.easing_formulas[d](e/f):e/f;for(var s in i)if(i[z](s)){switch(na[s]){case "along":k=r*f*g[s];h.back&&(k=h.len-k);d=la(h[s],k);o.translate(g.sx-g.x||0,g.sy-g.y||0);g.x=d.x;g.y=d.y;o.translate(d.x-g.sx,d.y-g.sy);h.rot&&o.rotate(g.r+d.alpha,d.x,d.y);break;case "number":k=+i[s]+r*f*g[s];break;case "colour":k="rgb("+[ra(B(i[s].r+r*f*g[s].r)),ra(B(i[s].g+r*f*g[s].g)),ra(B(i[s].b+r*f*g[s].b))][J](",")+")";break;case "path":k=[];d=0;for(var H=i[s][n];d<H;d++){k[d]=[i[s][d][0]];for(var y=1,v=i[s][d][n];y<v;y++)k[d][y]=+i[s][d][y]+r*f*g[s][d][y];k[d]=k[d][J](K)}k=k[J](K);break;case "csv":switch(s){case "translation":k=g[s][0]*(e-l);d=g[s][1]*(e-l);j.x+=k;j.y+=d;k=k+K+d;break;case "rotation":k=+i[s][0]+r*f*g[s][0];i[s][1]&&(k+=","+i[s][1]+","+i[s][2]);break;case "scale":k=[+i[s][0]+r*f*g[s][0],+i[s][1]+r*f*g[s][1],2 in h[s]?h[s][2]:"",3 in h[s]?h[s][3]:""][J](K);break;case "clip-rect":k=[];for(d=4;d--;)k[d]=+i[s][d]+r*f*g[s][d];break}break}p[s]=k}o.attr(p);o._run&&o._run.call(o)}else{if(h.along){d=la(h.along,h.len*!h.back);o.translate(g.sx-(g.x||0)+d.x-g.sx,g.sy-(g.y||0)+d.y-g.sy);h.rot&&o.rotate(g.r+d.alpha,d.x,d.y)}(j.x||j.y)&&o.translate(-j.x,-j.y);h.scale&&(h.scale+="");o.attr(h);delete M[b];M[n]--;o.in_animation=null;m.is(r,"function")&&r.call(o)}c.prev=e}}m.svg&&o&&o.paper&&o.paper.safari();M[n]&&setTimeout(Sa)},ra=function(a){return a>255?255:a<0?0:a},ka=function(a,b){if(a==null)return{x:this._.tx,y:this._.ty,toString:ta};this._.tx+=+a;this._.ty+=+b;switch(this.type){case "circle":case "ellipse":this.attr({cx:+a+this.attrs.cx,cy:+b+this.attrs.cy});break;case "rect":case "image":case "text":this.attr({x:+a+this.attrs.x,y:+b+this.attrs.y});break;case "path":var c=xa(this.attrs.path);c[0][1]+=+a;c[0][2]+=+b;this.attr({path:c});break}return this};t[q].animateWith=function(a,b,c,e,f){M[a.id]&&(b.start=M[a.id].start);return this.animate(b,c,e,f)};t[q].animateAlong=ua();t[q].animateAlongBack=ua(1);t[q].onAnimation=function(a){this._run=a||0;return this};t[q].animate=function(a,b,c,e){if(m.is(c,"function")||!c)e=c||null;var f={},d={},i={};for(var g in a)if(a[z](g))if(na[z](g)){f[g]=this.attr(g);f[g]==null&&(f[g]=da[g]);d[g]=a[g];switch(na[g]){case "along":var h=Ra(a[g]),j=la(a[g],h*!!a.back),l=this.getBBox();i[g]=h/b;i.tx=l.x;i.ty=l.y;i.sx=j.x;i.sy=j.y;d.rot=a.rot;d.back=a.back;d.len=h;a.rot&&(i.r=x(this.rotate())||0);break;case "number":i[g]=(d[g]-f[g])/b;break;case "colour":f[g]=m.getRGB(f[g]);h=m.getRGB(d[g]);i[g]={r:(h.r-f[g].r)/b,g:(h.g-f[g].g)/b,b:(h.b-f[g].b)/b};break;case "path":h=ga(f[g],d[g]);f[g]=h[0];j=h[1];i[g]=[];h=0;for(l=f[g][n];h<l;h++){i[g][h]=[0];for(var o=1,r=f[g][h][n];o<r;o++)i[g][h][o]=(j[h][o]-f[g][h][o])/b}break;case "csv":j=(a[g]+"").split(O);h=(f[g]+"").split(O);switch(g){case "translation":f[g]=[0,0];i[g]=[j[0]/b,j[1]/b];break;case "rotation":f[g]=h[1]==j[1]&&h[2]==j[2]?h:[0,j[1],j[2]];i[g]=[(j[0]-f[g][0])/b,0,0];break;case "scale":a[g]=j;f[g]=(f[g]+"").split(O);i[g]=[(j[0]-f[g][0])/b,(j[1]-f[g][1])/b,0,0];break;case "clip-rect":f[g]=(f[g]+"").split(O);i[g]=[];for(h=4;h--;)i[g][h]=(j[h]-f[g][h])/b;break}d[g]=j}}this.stop();this.in_animation=1;M[this.id]={start:a.start||+new Date,ms:b,easing:c,from:f,diff:i,to:d,el:this,callback:e,t:{x:0,y:0}};++M[n]==1&&Sa();return this};t[q].stop=function(){M[this.id]&&M[n]--;delete M[this.id];return this};t[q].translate=function(a,b){return this.attr({translation:a+" "+b})};t[q].toString=function(){return"Rapha\u00ebl\u2019s object"};m.ae=M;var S=function(a){this.items=[];this[n]=0;if(a)for(var b=0,c=a[n];b<c;b++)if(a[b]&&(a[b].constructor==t||a[b].constructor==S)){this[this.items[n]]=this.items[this.items[n]]=a[b];this[n]++}};S[q][C]=function(){for(var a,b,c=0,e=arguments[n];c<e;c++)if((a=arguments[c])&&(a.constructor==t||a.constructor==S)){b=this.items[n];this[b]=this.items[b]=a;this[n]++}return this};S[q].pop=function(){delete this[this[n]--];return this.items.pop()};for(var sa in t[q])if(t[q][z](sa))S[q][sa]=function(a){return function(){for(var b=0,c=this.items[n];b<c;b++)this.items[b][a][G](this.items[b],arguments);return this}}(sa);S[q].attr=function(a){if(a&&m.is(a,"array")&&m.is(a[0],"object"))for(var b=0,c=a[n];b<c;b++)this.items[b].attr(a[b]);else{b=0;for(c=this.items[n];b<c;b++)this.items[b].attr[G](this.items[b],arguments)}return this};S[q].animate=function(a,b,c,e){(m.is(c,"function")||!c)&&(e=c||null);var f=this.items[n],d=f,i=this,g;e&&(g=function(){!--f&&e.call(i)});for(this.items[--d].animate(a,b,c||g,g);d--;)this.items[d].animateWith(this.items[f-1],a,b,c||g,g);return this};S[q].insertAfter=function(a){for(var b=this.items[n];b--;)this.items[b].insertAfter(a);return this};S[q].getBBox=function(){for(var a=[],b=[],c=[],e=[],f=this.items[n];f--;){var d=this.items[f].getBBox();a[C](d.x);b[C](d.y);c[C](d.x+d.width);e[C](d.y+d.height)}a=Q[G](0,a);b=Q[G](0,b);return{x:a,y:b,width:P[G](0,c)-a,height:P[G](0,e)-b}};m.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var e in a.face)if(a.face[z](e))b.face[e]=a.face[e];if(this.fonts[c])this.fonts[c][C](b);else this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=U(a.face["units-per-em"],10);for(var f in a.glyphs)if(a.glyphs[z](f)){c=a.glyphs[f];b.glyphs[f]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(i){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[i]||"M"})+"z"};if(c.k)for(var d in c.k)if(c[z](d))b.glyphs[f].k[d]=c.k[d]}}return a};E[q].getFont=function(a,b,c,e){e=e||"normal";c=c||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;var f=m.fonts[a];if(!f){a=new RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(var d in m.fonts)if(m.fonts[z](d))if(a.test(d)){f=m.fonts[d];break}}var i;if(f){d=0;for(a=f[n];d<a;d++){i=f[d];if(i.face["font-weight"]==b&&(i.face["font-style"]==c||!i.face["font-style"])&&i.face["font-stretch"]==e)break}}return i};E[q].print=function(a,b,c,e,f,d){d=d||"middle";var i=this.set();c=(c+"").split("");var g=0;m.is(e,"string")&&(e=this.getFont(e));if(e){f=(f||16)/e.face["units-per-em"];var h=e.face.bbox.split(O),j=+h[0];d=+h[1]+(d=="baseline"?h[3]-h[1]+ +e.face.descent:(h[3]-h[1])/2);h=0;for(var l=c[n];h<l;h++){var o=h&&e.glyphs[c[h-1]]||{},r=e.glyphs[c[h]];g+=h?(o.w||e.w)+(o.k&&o.k[c[h]]||0):0;r&&r.d&&i[C](this.path(r.d).attr({fill:"#000",stroke:"none",translation:[g,0]}))}i.scale(f,f,j,d).translate(a-j,b-d)}return i};m.format=function(a){var b=m.is(arguments[1],"array")?[0].concat(arguments[1]):arguments,c=/\{(\d+)\}/g;a&&m.is(a,"string")&&b[n]-1&&(a=a.replace(c,function(e,f){return b[++f]==null?"":b[f]}));return a||""};m.ninja=function(){var a=Raphael;if(va.was)Raphael=va.is;else delete Raphael;return a};m.el=t[q];return m}();